sourceSets {
	e2eTest {
		java.srcDir 'src/e2e/java'
		resources.srcDir file('src/e2e/resources')
																// grazie a questo eredito le dipendenze da Test
		compileClasspath += sourceSets.main.runtimeClasspath + sourceSets.test.runtimeClasspath
		runtimeClasspath += output + compileClasspath + configurations.testRuntime
	}
}

mongo {
	port 27017
	logging 'console'
}

task e2eTest(type: Test) {
	runWithMongoDb = true
	description = 'Runs end to end tests.' 

	maxHeapSize = '1024m' 

	testClassesDirs = sourceSets.e2eTest.output.classesDirs
	classpath = sourceSets.e2eTest.runtimeClasspath 

	e2eTest.outputs.upToDateWhen {false}
	mustRunAfter tasks.integTest
	check.dependsOn e2eTest
}
